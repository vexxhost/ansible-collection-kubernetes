[testenv:linters]
skipsdist = True
deps =
  {[testenv:sync-charts]deps}
commands =
  chart-vendor --check --charts-root roles/cert_manager/files

[testenv:sync-charts]
skipsdist = True
deps =
  chart-vendor>=0.2.0
commands =
  chart-vendor --charts-root roles/cert_manager/files

[testenv:molecule-venv]
deps =
  docker-image-py
  jmespath
  molecule
commands =
  molecule {posargs}

[testenv:molecule-cluster-api]
deps =
  {[testenv:molecule-venv]deps}
commands =
  molecule test -s cluster-api

[testenv:molecule-cluster-api-upgrade]
deps =
  {[testenv:molecule-venv]deps}
commands =
  molecule test -s cluster-api-upgrade

[testenv:molecule-helm]
deps =
  {[testenv:molecule-venv]deps}
commands =
  molecule test -s helm

[testenv:molecule-upload-helm-chart]
deps =
  {[testenv:molecule-venv]deps}
commands =
  molecule test -s upload-helm-chart
