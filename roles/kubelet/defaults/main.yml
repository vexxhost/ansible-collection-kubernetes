# Copyright (c) 2023 VEXXHOST, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.

kubelet_checksums:
  amd64:
    1.19.16: 26b707d1c38135c72612f5272c30a0a3aeec66b971fb2258a714c687bceb85b5
    1.20.15: 137b40720623588ad2e8feee9f73160c86298b328eeba28e207778806ca03614
    1.21.14: ca2e5e1f2a05b86e4f758181b172eb12bf99c3cc2a2b5b3e598f4c85d4d27fda
    1.22.17: 48d200775000567256a8c114cf4f5d389468b175c3add6b232ec3b26f03e8564
    1.23.17: 588dde06e2515601380787cb5fcb07ae3d3403130e1a5556b013b7b7fb4ab230
    1.24.12: 3105c4165cd4efea154046cac27ca087b10098c1793148fe2797b631e2897a2e
    1.25.12: 7aa7d0b4512e6d79ada2017c054b07aaf30d4dc0d740449364a5e2c26e2c1842
    1.26.7: 2926ea2cd7fcd644d24a258bdf21e1a8cfd95412b1079914ca46466dae1d74f2
  arm64:
    1.19.16: 6e51cc1f16259b1016858f32bd48f44929b8330a26eb4da26929907872ab116f
    1.20.15: 8e3f08018fb66ee8b01d468779dc88608ce86f7a8bada85b5c5ddaae0280aeca
    1.21.14: da40431ecee2be8167d07669d06f4f7b046b582c6fc5b5e8033c5f8a14d89adc
    1.22.17: dd76d33b2a72693b9a88614cef72367dd737d74433fd9e65129684086719d632
    1.23.17: 95e25ee4d2f34f628ba42685c6ae1ba6efdf86f2e76b5cceb0b48de4d66522a7
    1.24.12: b4116fb92694d75afd2ac3be742fe3c020470e53546cfacc73eb8a4e33cfcab1
    1.25.12: 3402d0fcec5105bb08b917bb5a29a979c674aa10a12a1dfe4e0d80b292f9fe56
    1.26.7: 73e086cfd8cd1cef559e739e19aff2932f8a9e0bdba3c9faeb9185a86d067fbb

kubelet_download_url: "https://storage.googleapis.com/kubernetes-release/release/v{{ kubelet_version }}/bin/{{ ansible_facts['system'] | lower }}/{{ download_artifact_goarch }}/kubelet" # noqa: yaml[line-length]
kubelet_download_dest: /usr/bin/kubelet
kubelet_binary_checksum: "{{ kubelet_checksums[download_artifact_goarch][kubelet_version] }}"

# NOTE(mnaser): This is to accomodate for the uninstallation of the old packages
#               that shipped with the operating system
kubelet_package_name: kubelet

# Allow usage of swap memory for the Kubelet
# WARNING: Do not enable this unless you know what you are doing.
kubelet_allow_unsafe_swap: false

# List of sysctl parameters to set
kubelet_sysctls:
  - name: net.ipv4.ip_forward
    value: 1
  - name: net.bridge.bridge-nf-call-iptables
    value: 1
  - name: net.bridge.bridge-nf-call-ip6tables
    value: 1
  - name: net.ipv4.conf.all.rp_filter
    value: 0

# CRI socket path
kubelet_cri_socket: /run/containerd/containerd.sock

# Node IP address
kubelet_node_ip: "{{ ansible_facts['default_ipv4'].address }}"

# Kubelet hostname
kubelet_hostname: "{{ inventory_hostname_short }}"
